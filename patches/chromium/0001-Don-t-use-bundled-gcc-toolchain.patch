From 38ef9cdab2d0ad59addddbdb855a70af09b215b5 Mon Sep 17 00:00:00 2001
From: kxxt <rsworktech@outlook.com>
Date: Fri, 7 Jun 2024 06:58:17 +0200
Subject: [PATCH] Don't use bundled gcc toolchain

To solve libstdc++ gcc11 related linker error
---
 tools/rust/build_rust.py | 1 +
 1 file changed, 1 insertion(+)

diff --git a/tools/rust/build_rust.py b/tools/rust/build_rust.py
index 6b0a2ae92cfef..629449977edd2 100755
--- a/tools/rust/build_rust.py
+++ b/tools/rust/build_rust.py
@@ -386,6 +386,7 @@ class XPy:
             self._env['RUSTFLAGS_NOT_BOOTSTRAP'] += (
                 f' -Clink-arg={LD_PATH_FLAG}{libxml2_dirs.lib_dir}')
 
+        gcc_toolchain_path = None
         if gcc_toolchain_path:
             # We use these flags to avoid linking with the system libstdc++.
             gcc_toolchain_flag = f'--gcc-toolchain={gcc_toolchain_path}'
-- 
2.39.2

