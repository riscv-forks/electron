From c101771174c907b4a2389c6fbf8c33942844aa23 Mon Sep 17 00:00:00 2001
From: Eric Long <i@hack3r.moe>
Date: Sat, 11 Jan 2025 00:59:07 +0100
Subject: [PATCH] Add riscv64 to Study::CpuArchitecture

---
 components/variations/proto/study.proto                        | 1 +
 .../variations/service/variations_field_trial_creator_base.cc  | 3 +++
 2 files changed, 4 insertions(+)

diff --git a/components/variations/proto/study.proto b/components/variations/proto/study.proto
index 7ef5eb238e1a2..6723b257dce7e 100644
--- a/components/variations/proto/study.proto
+++ b/components/variations/proto/study.proto
@@ -262,6 +262,7 @@ message Study {
     // A Mac-only value, indicating an x86-64 binary running on an arm64 host
     // via "Rosetta 2" binary translation.
     TRANSLATED_X86_64 = 4;
+    RISCV64 = 5;
   }
 
   // Enum to pass as optional bool.
diff --git a/components/variations/service/variations_field_trial_creator_base.cc b/components/variations/service/variations_field_trial_creator_base.cc
index 73ff906e1b51a..332b39389e15c 100644
--- a/components/variations/service/variations_field_trial_creator_base.cc
+++ b/components/variations/service/variations_field_trial_creator_base.cc
@@ -121,6 +121,9 @@ Study::CpuArchitecture GetCurrentCpuArchitecture() {
     }
     return Study::X86_64;
   }
+  if (process_arch == "RISCV_64") {
+    return Study::RISCV64;
+  }
   NOTREACHED_IN_MIGRATION();
   return Study::X86_64;
 }
-- 
2.39.2

